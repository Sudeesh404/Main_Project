{% extends 'header1.html' %}
{% load static %}
{% block content %}

<section class="page-title back-9550">
	<div class="overlay"></div>
	<div class="container">
	  <div class="row">
		<div class="col-md-12">
		  <div class="block text-center">
			<h1 class="text-capitalize mb-5 text-lg">Add Complaint </h1>
			<p style="color: red;">{{msg}}</p>
		  </div>
		</div>
	  </div>
	</div>
  </section>

<section class="contact-form-wrap section">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-6">
            </div>
        </div>
        <div class="row">
            <div class="col-lg-12 col-md-12 col-sm-12">
                <form class="submit" type="submit" method="post" action="{% url 'add-com' %}" >
                {% csrf_token %}
                    <div class="row">
                        <div class="col-lg-6">
                            <div class="form-group">
                                <h6>Choose the Police Station</h6>
                                <select name="police" class="form-control" id="exampleFormControlSelect1">
                                  <option>Choose area of jurisdiction</option>
                                  {% for op in ins_queryset %}
                                  <option value="{{ op.id }}">{{ op.station_name }}</option>
                                  {% endfor %}
                                </select>
                            </div>
                        </div>

                        <div class="col-lg-6">
                            <div class="form-group">
                                <h6>Date of the Occurrence</h6>
                                <input name="date" id="date" type="date" class="form-control" placeholder="dd/mm/yyyy">
                                <span id="dateError" style="color: red;"></span>
                            </div>
                            
                            <script>
                                var dateInput = document.getElementById('date');
                                var dateError = document.getElementById('dateError');
                            
                                dateInput.addEventListener('input', function() {
                                    var enteredDate = new Date(dateInput.value);
                                    var currentDate = new Date();
                            
                                    // Clear previous error message
                                    dateError.textContent = '';
                            
                                    // Validate if a valid date is entered
                                    if (isNaN(enteredDate.getTime())) {
                                        dateError.textContent = 'Please enter a valid date.';
                                        return;
                                    }
                            
                                    // Validate if entered date is in the future
                                    if (enteredDate > currentDate) {
                                        dateError.textContent = 'Please select a date in the past or today.';
                                    }
                                });
                            </script>
                            
                        </div>
                         <div class="col-lg-6">
                            <div class="form-group">
                                <h6>Date of the information received</h6>
                                <input name="rdate" id="rdate" type="date" class="form-control" placeholder="dd/mm/yyyy">
                                <span id="rdateError" style="color: red;"></span>
                            </div>
                            
                            <script>
                                var rdateInput = document.getElementById('rdate');
                                var rdateError = document.getElementById('rdateError');
                            
                                rdateInput.addEventListener('input', function() {
                                    var enteredDate = new Date(rdateInput.value);
                                    var currentDate = new Date();
                            
                                    // Clear previous error message
                                    rdateError.textContent = '';
                            
                                    // Validate if a valid date is entered
                                    if (isNaN(enteredDate.getTime())) {
                                        rdateError.textContent = 'Please enter a valid date.';
                                        return;
                                    }
                            
                                    // Validate if entered date is in the future
                                    if (enteredDate > currentDate) {
                                        rdateError.textContent = 'Please select a date in the past or today.';
                                    }
                                });
                            </script>
                            
                        </div>
                         <div class="col-lg-6">
                            <div class="form-group">
                                <h6>Time of information received</h6>
                                <input name="time" type="time" class="form-control" placeholder="">
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <div class="form-group">
                                <h6>Address of Occurence</h6>
                                <input name="address" type="text" class="form-control" placeholder="">
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <div class="form-group">
                                <h6>Landmark of Occurence</h6>
                                <input name="landmark" type="text" class="form-control" placeholder="">
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <div class="form-group">
                                <h6>Charges of the case</h6>
                                <input name="charge" type="text" class="form-control" placeholder="">
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <div class="form-group">
                                <h6>Number of Victim</h6>
                                <input name="victim" type="number" class="form-control" placeholder="">
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <div class="form-group">
                                <h6>Informant's first name</h6>
                                <input name="fname" type="text" class="form-control" placeholder="">
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <div class="form-group">
                                <h6>Informant's last name</h6>
                                <input name="lname" type="text" class="form-control" placeholder="">
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <div class="form-group">
                                <h6>Date of the Birth of Informant</h6>
                                <input name="dob" type="date" class="form-control" placeholder="dd/mm/yyyy">
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <div class="form-group">
                                <h6>Address of the Informant</h6>
                                <input name="info_address" type="text" class="form-control" >
                            </div>
                        </div>
                    </div>
                    <div class="text-center">
                        <button type="submit" class="btn btn-primary mt-4" >Submit</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</section>
{% endblock %}