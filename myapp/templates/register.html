{% extends 'header.html '%}
{% block content %}
{% load static %}

<style>
:root{
    --msg: {{msg}}
}
</style>

<section class="page-title back-9550">
	<div class="overlay"></div>
	<div class="container">
	  <div class="row">
		<div class="col-md-12">
		  <div class="block text-center">
			<h1 class="text-capitalize mb-5 text-lg">Register new account </h1>
			<p style="color: red;">{{msg}}</p>
		  </div>
		</div>
	  </div>
	</div>
  </section>


  <section class="contact-form-wrap section">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-6">
                <div class="section-title text-center">
                    <h2 class="text-md mb-2">Sign Up</h2>
                    <div class="divider mx-auto my-4"></div>
                    <p class="mb-5">Please fill valid details as false details will be punishable by the authorities.</p>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-12 col-md-12 col-sm-12">
                <form role="form" action="{% url 'register' %}" method="POST">
					{% csrf_token %}
                    <div class="row">
                        <div class="col-lg-6">
                            <div class="form-group">
                                <input name="fname" id="fname" type="text" class="form-control" placeholder="First name" oninput="validateFirstName(this)" required>
                                <small id="fnameError" style="color: red;"></small>
                            </div>
                            
                            <script>
                                function validateFirstName(input) {
                                    const fname = input.value.trim();
                            
                                    // Define a regular expression pattern for validation
                                    const pattern = /^[^_0-9\s][a-zA-Z]*$/;
                            
                                    // Check if the input matches the pattern
                                    if (!pattern.test(fname)) {
                                        document.getElementById('fnameError').innerText = 'First name must not begin with underscore, contain numbers, or spaces.';
                                        input.setCustomValidity('Invalid input');
                                    } else {
                                        document.getElementById('fnameError').innerText = '';
                                        input.setCustomValidity('');
                                    }
                                }
                            </script>
                            
                        </div>

                        <div class="col-lg-6">
                            <div class="form-group">
                                <input name="lname" id="lname" type="text" class="form-control" placeholder="Last name" oninput="validateLastName(this)" required>
                                <small id="lnameError" style="color: red;"></small>
                            </div>
                            
                            <script>
                                function validateLastName(input) {
                                    const lname = input.value.trim();
                            
                                    // Define a regular expression pattern for validation
                                    const pattern = /^[^_0-9\s][a-zA-Z]*$/;
                            
                                    // Check if the input matches the pattern
                                    if (!pattern.test(lname)) {
                                        document.getElementById('lnameError').innerText = 'Last name must not begin with underscore, contain numbers, or spaces.';
                                        input.setCustomValidity('Invalid input');
                                    } else {
                                        document.getElementById('lnameError').innerText = '';
                                        input.setCustomValidity('');
                                    }
                                }
                            </script>
                            
                        </div>
                         <div class="col-lg-6">
                            <div class="form-group">
                                <input name="email" id="email" type="email" class="form-control" placeholder="Email" oninput="validateEmail(this)" required>
                                <small id="emailError" style="color: red;"></small>
                            </div>
                            
                            <script>
                                function validateEmail(input) {
                                    const email = input.value.trim();
                            
                                    // Define a regular expression pattern for email validation
                                    const pattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                            
                                    // Check if the input matches the pattern
                                    if (!pattern.test(email)) {
                                        document.getElementById('emailError').innerText = 'Invalid email format.';
                                        input.setCustomValidity('Invalid input');
                                    } else {
                                        document.getElementById('emailError').innerText = '';
                                        input.setCustomValidity('');
                                    }
                                }
                            </script>
                            
                        </div>
                         <div class="col-lg-6">
                            <div class="form-group">
                                <input name="phone" id="phone" type="text" class="form-control" placeholder="Phone Number" oninput="validatePhone(this)" required>
                                <small id="phoneError" style="color: red;"></small>
                            </div>
                            
                            <script>
                                function validatePhone(input) {
                                    const phone = input.value.trim();
                            
                                    // Define a regular expression pattern for phone number validation
                                    const pattern = /^\d{10}$/;
                            
                                    // Check if the input matches the pattern
                                    if (!pattern.test(phone)) {
                                        document.getElementById('phoneError').innerText = 'Phone number must be exactly 10 digits.';
                                        input.setCustomValidity('Invalid input');
                                    } else {
                                        document.getElementById('phoneError').innerText = '';
                                        input.setCustomValidity('');
                                    }
                                }
                            </script>
                            
                        </div>
						<div class="col-lg-6">
                            <div class="form-group">
                                <input class="form-control" id="password" placeholder="Password" name="password" type="password" oninput="validatePassword(this)" required>
                                <small id="passwordError" style="color: red;"></small>
                            </div>
                            
                            <script>
                                function validatePassword(input) {
                                    const password = input.value.trim();
                            
                                    // Define regular expression patterns for password validation
                                    const lengthPattern = /.{8,}/;  // At least 8 characters
                                    const specialCharPattern = /[!@#$%^&*(),.?":{}|<>]/;  // At least one special character
                                    const numberPattern = /\d/;  // At least one number
                            
                                    // Check if the password meets all criteria
                                    if (!lengthPattern.test(password)) {
                                        document.getElementById('passwordError').innerText = 'Password must be at least 8 characters long.';
                                        input.setCustomValidity('Invalid input');
                                    } else if (!specialCharPattern.test(password)) {
                                        document.getElementById('passwordError').innerText = 'Password must contain at least one special character.';
                                        input.setCustomValidity('Invalid input');
                                    } else if (!numberPattern.test(password)) {
                                        document.getElementById('passwordError').innerText = 'Password must contain at least one number.';
                                        input.setCustomValidity('Invalid input');
                                    } else {
                                        document.getElementById('passwordError').innerText = '';
                                        input.setCustomValidity('');
                                    }
                                }
                            </script>
                            
                        </div>
                            <div class="form-group">
                                <input class="form-control" id="confirmPassword" placeholder="Re-enter the Password" name="rpassword" type="password" oninput="validateConfirmPassword(this)" required>
                                <small id="confirmPasswordError" style="color: red;"></small>
                            </div>
                            
                            <script>
                                function validateConfirmPassword(input) {
                                    const password = document.getElementById('password').value;
                                    const confirmPassword = input.value;
                            
                                    if (password !== confirmPassword) {
                                        document.getElementById('confirmPasswordError').innerText = 'Passwords do not match.';
                                        input.setCustomValidity('Passwords do not match');
                                    } else {
                                        document.getElementById('confirmPasswordError').innerText = '';
                                        input.setCustomValidity('');
                                    }
                                }
                            </script>
                            
                        </div>

                    </div>

                    <div class="text-center">
                        <button type="submit" href="#" class="btn btn-primary mt-4" onclick="confirm(var(--msg))" >Submit</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</section>
	

{% endblock %}